#The real roulette effect

roulette_effect = {
	random_playable_ruler = {
		limit = {
			is_theocracy = no
			NOT = { dynasty = none }
			is_landed = yes
			trigger_if = {
				limit = {
					has_game_rule = {
						name = tiers
						value = no_emperors
					}
				}
				NOT = { tier = EMPEROR }
			}
			trigger_if = {
				limit = {
					has_game_rule = {
						name = tiers
						value = no_counts
					}
				}
				NOT = { tier == COUNT }
			}
			trigger_if = {
				limit = {
					has_game_rule = {
						name = tiers
						value = no_kings_emperors
					}
				}
				NOR = { tier = EMPEROR tier = KING }
			}
			trigger_if = {
				limit = {
					has_game_rule = {
						name = tiers
						value = no_kings_emperors_dukes
					}
				}
				NOR = { tier = EMPEROR tier = KING tier = DUKE }
			}
			trigger_if = {
				limit = {
					has_game_rule = {
						name = safe_search
						value = on_2
					}
				}
				age < 35
				trigger_if = {
					limit = { is_female = yes }
					OR = {
						is_married_matrilineally = yes
						is_married = no
					}
				}
				trigger_if = {
					limit = { is_female = no }
					OR = {
						is_married_matrilineally = no
						is_married = no
					}
				}
				current_heir = { dynasty = THIS NOT = { trait = bastard } }
			}
			trigger_if = {
				limit = {
					has_game_rule = {
						name = safe_search
						value = on
					}
				}
				current_heir = { dynasty = THIS NOT = { trait = bastard } }
			}
			trigger_if = {
				limit = {
					has_game_rule = {
						name = regency_roulette
						value = no_child_regency
					}
				}
				age = 16
			}
			trigger_if = {
				limit = {
					has_game_rule = {
						name = regency_roulette
						value = no_regencies
					}
				}
				has_regent = no
			}
			trigger_if = {
				limit = {
					NOT = { has_dlc = "Rajas of India" }
				}
				NOR = {
					religion_group = indian_group
					culture_group = indo_aryan_group
					culture_group = dravidian_group
				}
			}
			trigger_if = {
				limit = {
					NOT = { has_dlc = "The Old Gods" }
				}
				NOT = { religion_group = pagan_group }
			}
			trigger_if = {
				limit = {
					NOT = { has_dlc = "Horse Lords" }
				}
				NOR = {
					religion = tengri_pagan
					government = nomadic_government
				}
			}
			trigger_if = {
				limit = {
					NOT = { has_dlc = "The Republic" }
				}
				is_republic = no
			}
			trigger_if = {
				limit = {
					NOT = { has_dlc = "The Sword of Islam" }
				}
				NOR = {
					religion_group = muslim
					culture_group = arabic
				}
			}
		}
		save_event_target_as = roulette_king
		add_character_modifier = {
			name = spin_cooldown
			months = 1
			hidden = yes
			inherit = yes
		}
		add_character_modifier = {
			name = change_years_cooldown
			months = 1
			hidden = yes
			inherit = yes
		}
	}
}