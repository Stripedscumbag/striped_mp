namespace = ROULETTE
narrative_event = {
	id = ROULETTE.1
	title = ROULETTE_KINGS
	desc = DESC_ROULETTE_1
	picture = GFX_evt_roulette
	is_triggered_only = yes #on startup
	
	ai = no
	
	trigger = {
		is_save_game = no
	}
	
	option = { #stay as start
		name = A_ROULETTE_1
	}
	
	option = { #start randomizing
		name = B_ROULETTE_1
		character_event = { id = ROULETTE.10 }
	}
}

character_event = { #on_death
	id = ROULETTE.2
	title = ROULETTE_KINGS
	desc = DESC_ROULETTE_KINGS
	picture = GFX_evt_roulette
	is_triggered_only = yes
	
	trigger = {
		has_game_rule = {
			name = when_roulette
			value = on_death
		}
	}
	
	immediate = {
		roulette_effect = yes
	}
	
	option = {
		name = STAY
		custom_tooltip = { text = TT_STAY }
	}
	
	option = {
		name = SPIN_ROULETTE
		set_player_character = event_target:roulette_king
	}
}

province_event = {
	id = ROULETTE.5
	hide_window = yes
	is_triggered_only = yes
	
	trigger = { title = c_rome }
	
	immediate = {
		if = {
			limit = { has_global_flag = 5_year_roulette }
			province_event = { id = ROULETTE.5 years = 5 }
			any_player = { character_event = { id = ROULETTE.200 } }
		}
		else_if = {
			limit = { has_global_flag = 10_year_roulette }
			province_event = { id = ROULETTE.5 years = 10 }
			any_player = { character_event = { id = ROULETTE.200 } }
		}
		else_if = {
			limit = { has_global_flag = 25_year_roulette }
			province_event = { id = ROULETTE.5 years = 25 }
			any_player = { character_event = { id = ROULETTE.200 } }
		}
		else_if = {
			limit = { has_global_flag = 50_year_roulette }
			province_event = { id = ROULETTE.5 years = 50 }
			any_player = { character_event = { id = ROULETTE.200 } }
		}
	}
}

character_event = { #start event redirect
	id = ROULETTE.10
	title = ROULETTE_KINGS
	desc = DESC_ROULETTE_KINGS
	picture = GFX_evt_roulette
	is_triggered_only = yes
	
	immediate = {
		roulette_effect = yes
	}
	
	option = {
		name = SPIN_ROULETTE
		set_player_character = event_target:roulette_king
	}
}

character_event = { #set years
	id = ROULETTE.100
	title = ROULETTE_KINGS
	desc = DESC_ROULETTE_KINGS_YEARS
	picture = GFX_evt_roulette
	is_triggered_only = yes
	
	ai = no
	
	trigger = {
		has_game_rule = {
			name = when_roulette
			value = years
		}
		is_save_game = no
		is_multiplayer_host_character = yes
	}
	
	option = {
		name = 5_years
		hidden_tooltip = {
			set_global_flag = 5_year_roulette #used to change later maybe
		}
	}
	
	option = {
		name = 10_years
		hidden_tooltip = {
			set_global_flag = 10_year_roulette
		}
	}
	
	option = {
		name = 25_years
		hidden_tooltip = {
			set_global_flag = 25_year_roulette
		}
	}
	
	option = {
		name = 50_years
		hidden_tooltip = {
			set_global_flag = 50_year_roulette
		}
	}
}

character_event = { #set years
	id = ROULETTE.101
	title = ROULETTE_KINGS
	desc = DESC_ROULETTE_KINGS_YEARS
	picture = GFX_evt_roulette
	is_triggered_only = yes
	
	ai = no
	
	trigger = {
		has_game_rule = {
			name = when_roulette
			value = years
		}
		is_multiplayer_host_character = yes
	}
	
	option = {
		name = 5_years
		hidden_tooltip = {
			clr_global_flag = 10_year_roulette
			clr_global_flag = 25_year_roulette
			clr_global_flag = 50_year_roulette
			set_global_flag = 5_year_roulette 
		}
	}
	
	option = {
		name = 10_years
		hidden_tooltip = {
			set_global_flag = 10_year_roulette
			clr_global_flag = 25_year_roulette
			clr_global_flag = 50_year_roulette
			clr_global_flag = 5_year_roulette
		}
	}
	
	option = {
		name = 25_years
		hidden_tooltip = {
			set_global_flag = 25_year_roulette
			clr_global_flag = 10_year_roulette
			clr_global_flag = 50_year_roulette
			clr_global_flag = 5_year_roulette
		}
	}
	
	option = {
		name = 50_years
		hidden_tooltip = {
			set_global_flag = 50_year_roulette
			clr_global_flag = 25_year_roulette
			clr_global_flag = 10_year_roulette
			clr_global_flag = 5_year_roulette
		}
	}
}

character_event = {
	id = ROULETTE.200
	title = ROULETTE_KINGS
	desc = DESC_ROULETTE_KINGS
	picture = GFX_evt_roulette
	is_triggered_only = yes
	
	immediate = {
		roulette_effect = yes
	}
	
	option = {
		name = STAY
		custom_tooltip = { text = TT_STAY }
	}
	
	option = {
		name = SPIN_ROULETTE
		set_player_character = event_target:roulette_king
	}
}

character_event = {
	id = ROULETTE.201
	title = ROULETTE_KINGS
	desc = DESC_ROULETTE_KINGS
	picture = GFX_evt_roulette
	is_triggered_only = yes
	
	immediate = {
		roulette_effect = yes
	}
	
	option = {
		name = STAY
	}
	
	option = {
		name = SPIN_ROULETTE
		set_player_character = event_target:roulette_king
	}
}